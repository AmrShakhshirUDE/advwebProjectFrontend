{"ast":null,"code":"import _classCallCheck from \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Amr\\\\Duisburg\\\\1semester\\\\AdvancedWebTechnology\\\\project\\\\testdeployUDE-master\\\\client\\\\src\\\\components\\\\ProfileNormal.js\";\nimport React, { Component } from 'react';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport jwt_decode from 'jwt-decode';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport axios from 'axios';\nimport { UrlContext } from '../contexts/urlContext';\n\nvar ProfileNormal = /*#__PURE__*/function (_Component) {\n  _inherits(ProfileNormal, _Component);\n\n  function ProfileNormal(props) {\n    var _this;\n\n    _classCallCheck(this, ProfileNormal);\n\n    var token = localStorage.usertoken;\n    var decoded = jwt_decode(token);\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProfileNormal).call(this, props));\n\n    _this.login = function (user) {\n      if (_this.state.mounted) {\n        _this.logOut();\n      }\n\n      return axios.post(\"users/login\", {\n        email: user.email,\n        password: user.password\n      }).then(function (response) {\n        _this.setState({\n          \"result\": response.data.msg\n        });\n\n        localStorage.setItem('usertoken', response.data.token);\n        return response.data.token;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.handleFile = function (e) {\n      var newFile = e.target.files[0];\n\n      _this.setState({\n        file: newFile // },(e)=>this.imageUpload(e));\n\n      }, function (e) {\n        return _this.getImage(_this.state.file.name);\n      });\n    };\n\n    _this.state = {\n      'username': decoded.identity.username,\n      'email': decoded.identity.email,\n      'image': decoded.identity.file,\n      secondimage: '',\n      Open: false,\n      msg: '',\n      'file': decoded.identity.file,\n      uri: '',\n      'serverUrl': UrlContext._currentValue,\n      \"result\": \"\",\n      \"resToken\": \"\",\n      mounted: false\n    };\n    return _this;\n  }\n\n  _createClass(ProfileNormal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // this.logOut()\n      var user = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      this.login(user);\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        username: decoded.identity.username,\n        email: decoded.identity.email,\n        file: decoded.identity.file\n      }, function () {\n        return _this2.getImage(_this2.state.file);\n      }, console.log(this.state.file));\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      // e.preventDefault()\n      localStorage.removeItem('usertoken'); // this.props.history.push(`/`)\n    }\n  }, {\n    key: \"getImage\",\n    value: function getImage(file) {\n      if (this.state.file !== 'images/Propic1.png') {\n        this.setState({\n          image: this.state.serverUrl + 'file/' + file\n        });\n      } else {\n        this.setState({\n          image: this.state.image\n        });\n      }\n    }\n  }, {\n    key: \"imageUpload\",\n    value: function imageUpload(e, file) {\n      var _this3 = this;\n\n      var email = this.state.email; // let  file = this.state.file\n\n      console.log(file);\n      var formdata = new FormData();\n      formdata.append('file', file);\n      formdata.append('email', email);\n      axios({\n        url: this.state.serverUrl + 'profileUpload',\n        method: 'POST',\n        headers: {\n          authorization: 'usertoken'\n        },\n        data: formdata\n      }).then(function (response) {\n        _this3.setState({\n          \"result\": response.data.msg,\n          mounted: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-8 mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }\n      }, this.state.username)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"font-weight-bold text-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, this.state.msg), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-sm-8 mx-auto\",\n        style: {\n          \"display\": \"flex\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: this.state.image,\n        style: {\n          \"width\": '40%',\n          \"height\": 'auto',\n          \"border\": 'solid 1px lightgrey',\n          \"borderRadius\": \"25%\"\n        },\n        title: this.state.username,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        style: {\n          \"display\": \"flex\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        className: \"my-2 btn btn-secondary btn-xs\",\n        type: \"file\",\n        name: \"file\",\n        accept: \"image/png, image/jpeg\",\n        onChange: function onChange(e) {\n          return _this4.handleFile(e);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          \"display\": \"flex\",\n          \"justifyContent\": \"center\",\n          \"alignItems\": \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-primary mt-2\",\n        onClick: function onClick(e) {\n          return _this4.imageUpload(e, _this4.state.file);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }\n      }, \"update Image\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 16\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 16\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table col-md-6 mx-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 29\n        }\n      }, \"Username\"), /*#__PURE__*/React.createElement(\"td\", {\n        onChange: this.change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 29\n        }\n      }, this.state.username, \" \")), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 29\n        }\n      }, \"Email\"), /*#__PURE__*/React.createElement(\"td\", {\n        onChange: this.change,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 29\n        }\n      }, this.state.email, \" \")), /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \"btn btn-primary mt-2\",\n        size: \"lg\",\n        onClick: this.props.clickMe,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 33\n        }\n      }, \"update\")))))));\n    }\n  }]);\n\n  return ProfileNormal;\n}(Component);\n\nexport { ProfileNormal as default };","map":{"version":3,"sources":["C:/Amr/Duisburg/1semester/AdvancedWebTechnology/project/testdeployUDE-master/client/src/components/ProfileNormal.js"],"names":["React","Component","Button","Form","FormGroup","Label","Input","FormText","jwt_decode","Modal","ModalHeader","ModalBody","ModalFooter","axios","UrlContext","ProfileNormal","props","token","localStorage","usertoken","decoded","login","user","state","mounted","logOut","post","email","password","then","response","setState","data","msg","setItem","catch","err","console","log","handleFile","e","newFile","target","files","file","getImage","name","identity","username","secondimage","Open","uri","_currentValue","removeItem","image","serverUrl","formdata","FormData","append","url","method","headers","authorization","imageUpload","change","clickMe"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport jwt_decode from 'jwt-decode';\nimport {Modal, ModalHeader,ModalBody,ModalFooter } from 'reactstrap';\nimport axios from 'axios';\nimport { UrlContext } from '../contexts/urlContext';\n\n\nexport default class ProfileNormal extends Component{\n    constructor(props) {\n        const token = localStorage.usertoken\n        const decoded = jwt_decode(token)\n        super(props)\n        this.state = {\n            'username':decoded.identity.username,\n            'email': decoded.identity.email,\n            'image':decoded.identity.file,\n            secondimage:'',\n            Open:false,\n            msg:'',\n            'file':decoded.identity.file,\n            uri:'',\n            'serverUrl': UrlContext._currentValue,\n            \"result\":\"\",\n            \"resToken\":\"\",\n            mounted:false,\n        }\n    }\n    \n\n    componentDidMount () {\n        // this.logOut()\n        const user = {\n            email: this.state.email,\n            password: this.state.password\n        }\n        this.login(user)\n        const token = localStorage.usertoken\n        const decoded = jwt_decode(token)\n        this.setState({\n            username: decoded.identity.username,\n            email: decoded.identity.email,\n            file:decoded.identity.file\n        },()=>this.getImage(this.state.file), console.log(this.state.file))\n        \n    }\n\n    logOut () {     \n        // e.preventDefault()\n        localStorage.removeItem('usertoken')\n        // this.props.history.push(`/`)\n    }\n    \n\n\n    login = user => {\n        if (this.state.mounted){\n            this.logOut()\n        }\n        return axios\n            .post(\"users/login\", {\n                email: user.email,\n                password: user.password\n            })\n            .then(response => {\n                this.setState({\n                    \"result\":response.data.msg\n                })\n                localStorage.setItem('usertoken', response.data.token)\n                return response.data.token\n                \n            })\n            .catch(err => {\n                console.log(err)\n            })\n    }\n\n\n\n    getImage(file){\n        if(this.state.file!=='images/Propic1.png'){\n            this.setState({\n                image: this.state.serverUrl +'file/'+ file\n            })\n         }\n         else{\n            this.setState({\n                image: this.state.image\n            })\n         }\n    }\n\n  \n    handleFile = (e) => {\n        const newFile =e.target.files[0]\n        this.setState({\n            file:newFile,\n        // },(e)=>this.imageUpload(e));\n        },(e)=>this.getImage(this.state.file.name));\n    }\n\n    imageUpload(e,file){\n        let email = this.state.email\n        // let  file = this.state.file\n        console.log(file)\n        let formdata = new FormData()\n        formdata.append('file',file)\n        formdata.append('email',email)\n        axios({\n            url: this.state.serverUrl +'profileUpload',\n            method: 'POST',\n            headers:{\n                authorization:'usertoken'\n            },\n            data:formdata\n\n        }).then(response => {\n            \n            this.setState({\n                \"result\":response.data.msg,\n                mounted:true,\n            })\n                                    \n        })\n    }\n   \n    render() {\n        return (\n            <div>\n                <div className=\"col-sm-8 mx-auto\">\n                    <h2 className=\"text-center\">{this.state.username}</h2>\n                </div>\n                \n                <div className=\"font-weight-bold text-success\">{this.state.msg}</div>\n\n                <div className=\"col-sm-8 mx-auto\" style={{\"display\":\"flex\", \"justifyContent\": \"center\", \"alignItems\": \"center\"}}>\n                    <img src={this.state.image} style={{ \"width\":'40%',\"height\":'auto', \"border\":'solid 1px lightgrey', \"borderRadius\": \"25%\"}} title={this.state.username}/> \n                </div>  \n                \n\n                <div className=\"\" style={{\"display\":\"flex\", \"justifyContent\": \"center\", \"alignItems\": \"center\"}}>\n                    {/* <label>Chane Image</label><br/> */}\n                    <input className=\"my-2 btn btn-secondary btn-xs\" \n                    type=\"file\" name=\"file\"\n                    accept=\"image/png, image/jpeg\" onChange={(e)=>this.handleFile(e)}/>\n                    {/* Change Image</button> */}\n                </div>\n                <div  style={{\"display\":\"flex\", \"justifyContent\": \"center\", \"alignItems\": \"center\"}}>\n                    <button className=\"btn btn-primary mt-2\" onClick={(e)=>this.imageUpload(e,this.state.file)}>update Image</button>                        \n                </div>\n\n                {/* <button onClick={()=>this.fileInput.click()}>Choose pictures</button><br/> */}\n               <br></br>\n               <div className=\"\">\n                    <table className=\"table col-md-6 mx-auto\">\n                        <tbody>\n                        <tr>\n                            <td>Username</td>\n                            <td onChange={this.change}>{this.state.username} </td>\n                        </tr>\n                        <tr>\n                            <td>Email</td>\n                            <td onChange={this.change}>{this.state.email} </td>\n                        </tr>\n                        <tr>\n                            <td></td>\n                            <td>\n                                <Button className=\"btn btn-primary mt-2\" size=\"lg\" onClick={this.props.clickMe}>update</Button>\n                            </td>\n                            </tr>\n                            </tbody>\n                    </table>\n               </div>\n                \n\n                \n            </div>\n        )\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}